  <%= hidden_field_tag "rolls[][status]", object.status %>
  <% unsubstituted_statuses = [Roll::STATUS[:NONE], Roll::STATUS[:ATTENDANCE], Roll::STATUS[:ABSENCE],] %>
  <div class="btn-group btn-group-sm btn-group-justified" data-toggle="buttons">
    <% if unsubstituted_statuses.include?(object.status) %>
      <% unsubstituted_statuses.each do |status| %>
        <label class="btn <%= object.status == status ? roll_status_button(status) : "btn-default" %> <%= "active" if object.status == status %>">
          <input type="radio" value="<%= status %>"><%= roll_status_name(status) %>
        </label>
      <% end %>
    <% elsif object.status == Roll::STATUS[:RECESS] %>
      <label class="btn <%= roll_status_button(object.status) %> active" disabled>
        <input type="radio" value="<%= object.status %>"><%= roll_status_name(object.status) %>
      </label>
    <% else %>
      <label class="btn <%= roll_status_button(object.status) %> active">
        <input type="radio" value="<%= object.status %>"><%= roll_status_name(object.status) %>
      </label>
      <label class="btn btn-default">
        <input type="radio" value="9">取消
      </label>
    <% end %>
  </div>
  <script>
    $('div[data-toggle="buttons"] .btn').click(function() {
      var div = $(this).parent("div");
      var radio = $(this).children("input");
      var td = div.parent("td");
      var hidden = td.children("input");
      hidden.val(radio.attr("value"));
      $(this).parent("div").children("label").each(function() {
        $(this).removeClass("btn-default");
        $(this).removeClass("btn-success");
        $(this).removeClass("btn-danger");
        $(this).removeClass("btn-info");
        $(this).removeClass("btn-primary");
        if (hidden.attr("value") == $(this).children("input").attr("value")) {
          if (hidden.attr("value") == "0") {
            $(this).addClass("btn-default");
          } else if (hidden.attr("value") == "<%= Roll::STATUS[:ATTENDANCE] %>") {
            $(this).addClass("btn-success");
          } else if (hidden.attr("value") == "<%= Roll::STATUS[:ABSENCE] %>") {
            $(this).addClass("btn-danger");
          } else if (hidden.attr("value") == "<%= Roll::STATUS[:SUBSTITUTE] %>") {
            $(this).addClass("btn-info");
          } else if (hidden.attr("value") == "<%= Roll::STATUS[:RECESS] %>") {
            $(this).addClass("btn-primary");
          } else {
            $(this).addClass("btn-default");
          }
        } else {
          $(this).addClass("btn-default");
        }
      });
    });
  </script>
